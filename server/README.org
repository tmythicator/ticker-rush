#+TITLE: Ticker Rush — Exchange Server
#+AUTHOR: Alexandr Timchenko
#+OPTIONS: toc:nil num:nil

* Overview
High-performance market data engine written in *Go*.
Acts as a proxy and caching layer between the expensive external API (Finnhub) and high-load frontend clients.

* Architecture
The server implements a *Producer-Consumer* pattern to handle API rate limits gracefully:

** 1. Background Worker (Producer)
- Runs in a separate Goroutine.
- Polls Finnhub API every *3 seconds*.
- Writes latest quotes to *Valkey*.

** 2. HTTP Handler (Consumer)
- Built with *Gin Framework*.
- Reads data directly from Valkey RAM.
- Decoupled from external API limits (1000 users = 0 extra load on Finnhub).

* Setup & Run

** 1. Environment Variables
Create a =.env= file in this directory:
#+BEGIN_SRC text
FINNHUB_API_KEY=your_api_key_here
#+END_SRC

** 2. Dependencies
Ensure you have a Redis/Valkey instance running on =localhost:6379=.

#+BEGIN_SRC bash
# Install Go modules
go mod tidy
#+END_SRC

** 3. Run
#+BEGIN_SRC bash
go run main.go
#+END_SRC

* "Safe Mode" (Rate Limiting)
To prevent getting banned by Finnhub on the free tier, the server operates in a strict allowlist mode.

** Configuration
- *Poll Interval:* 3 seconds
- *Tracked Assets:*
  - =AAPL= (NASDAQ)
  - =BINANCE:BTCUSDT= (Crypto)

* Project Structure
- =main.go= — Entry point, configuration, and HTTP server orchestration.
- =lib/= — Core logic (Environment loader, Market Fetcher worker).
- =model/= — Data structures (DTOs and Domain models).