syntax = "proto3";

package exchange;

option go_package = "github.com/tmythicator/ticker-rush/server/internal/proto/exchange";


message Quote {
  string symbol = 1;
  double price = 2;
  double change = 3;
  double change_percent = 4;
  int64 timestamp = 5;
}

service ExchangeService {
  rpc GetQuote(GetQuoteRequest) returns (GetQuoteResponse);
  rpc BuyStock(BuyStockRequest) returns (BuyStockResponse);
  rpc SellStock(SellStockRequest) returns (SellStockResponse);
}

message GetQuoteRequest {
  string symbol = 1;
}

message GetQuoteResponse {
  Quote quote = 1;
}


message BuyStockRequest {
  string symbol = 1;
  double quantity = 2;
}

message BuyStockResponse {
  bool success = 1;
  double total_price = 2;
  string message = 3;
}

message SellStockRequest {
  string symbol = 1;
  double quantity = 2;
}

message SellStockResponse {
  bool success = 1;
  double total_proceeds = 2;
  string message = 3;
}
