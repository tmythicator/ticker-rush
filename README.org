#+TITLE: TickerRush
#+AUTHOR: Alexandr Timchenko
#+OPTIONS: toc:nil num:nil

#+CAPTION: Ticker Rush Overview
#+ATTR_HTML: :width 100%
[[./assets/ticker-rush.png]]

[[https://github.com/tmythicator/ticker-rush/actions/workflows/backend-test.yml][https://github.com/tmythicator/ticker-rush/actions/workflows/backend-test.yml/badge.svg]] [[https://github.com/tmythicator/ticker-rush/actions/workflows/frontend-test.yml][https://github.com/tmythicator/ticker-rush/actions/workflows/frontend-test.yml/badge.svg]]  [[https://nixos.org][https://img.shields.io/badge/Built_With-Nix-5277C3.svg?logo=nixos&logoColor=white]]

* Overview
Ticker Rush is a high-performance, real-time stock trading simulator with gamification elements.
Participants start with equal virtual budgets and compete by trading stocks and ETFs against each other and an autonomous AI agent.

The goal: maximize portfolio profit and climb the global leaderboard within a specific ladder season.

* Architecture
The project follows a polyglot microservices architecture to demonstrate scalability and modern engineering practices:

- *Frontend*: React 19, TypeScript, Vite, Tailwind CSS, Lightweight Charts v5.
- *Backend:* Go (Golang) + Gin Framework. Implements a "Producer-Consumer" pattern:
  - *Worker:* Background process that polls Finnhub API (respecting rate limits) and writes to cache.
  - *API:* HTTP handler serving data from memory.
- *Data Layer:* Valkey (Open Source Redis fork) for caching hot market data.
- *AI Agent:* (Planned) Python service for automated trading strategies.

* Status
*Phase 1 Complete: Real-Time Data Pipeline*
- [X] Live market data streaming (Finnhub API integration)
- [X] In-memory caching layer (Valkey)
- [X] "Safe Mode" rate limiting implementation (3s interval)
- [X] Interactive Frontend Terminal with dynamic ticker switching

* Roadmap
- [-] *Phase 2: Gamification*
  - [ ] Leaderboard system
  - [-] User Profiles & Transaction History
  - [ ] Python AI Agent logic (Random Walk / Moving Average)
- [X] *Phase 3: Production Ready*
  - [X] Docker Compose orchestration
  - [X] Unit & Integration Tests
  - [X] CI/CD Pipelines

* Development & Deployment
** Prerequisites
- *Production*: Docker + Docker Compose
- *Development*: Nix (with flakes enabled)
- Finnhub.io API Key (Free)

** 1. Development (Nix + Flakes)
We use [[https://nixos.org][Nix]] to provide a hermetic, reproducible development environment. The ~flake.nix~ file handles all dependencies: Go, Node.js, Valkey, Postgres, Task, etc.

1. Enter the development shell:
   #+BEGIN_SRC bash
   nix develop
   #+END_SRC
   *Tip for NixOS Users*: You don't need to install anything globally. Just run `nix develop`.

2. Create a =.env= file:
   #+BEGIN_SRC bash
   cp .env-example .env
   # Edit .env and add your FINNHUB_API_KEY
   #+END_SRC

3. Start the development stack:
   #+BEGIN_SRC bash
   task dev
   #+END_SRC
   This runs ~process-compose~ to orchestrate:
   - *Frontend*: Vite dev server (port 8080)
   - *Backend*: Exchange API (port 8081) + Fetcher service
   - *Infrastructure*: Valkey (Redis) + Postgres

*** Common Tasks
We use [[https://taskfile.dev][Task]] as our command runner. Run ~task --list~ for details.

| Command | Description |
| ~task dev~ | Start full dev stack |
| ~task test~ | Run all tests (backend + frontend) |
| ~task lint~ | Run linters |
| ~task deps~ | Install dependencies |
| ~task backend:generate~ | Re-generate Code (sqlc + proto) |

** 2. Production (Docker)
The ~docker-compose.yml~ defines the production stack, building optimized multi-stage images.

1. Configure environment:
   #+BEGIN_SRC bash
   cp .env-example .env
   # Add FINNHUB_API_KEY
   #+END_SRC

2. Run production build:
   #+BEGIN_SRC bash
   docker-compose up -d --build
   #+END_SRC

3. Access:
   - Frontend: http://localhost:5173
   - API: http://localhost:8081

** 3. Manual Setup (No Nix)
If you prefer installing tools manually:

*** Prerequisites
- Go 1.25+
- Node.js 18+
- Valkey/Redis (port 6379)
- Postgres (port 5432)

*** Steps
1. *Start Infrastructure*: Ensure Valkey and Postgres are running.
2. *Configure*: Create =.env=.
3. *Run Services*:
   - Term A: ~cd backend && go run ./cmd/fetcher~
   - Term B: ~cd backend && go run ./cmd/exchange~
   - Term C: ~cd frontend && pnpm install && pnpm run dev~

* License
Apache License 2.0 â€” see =LICENSE= and =NOTICE=.
